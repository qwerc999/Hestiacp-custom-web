(()=>{function L(){Alpine.bind("BulkEdit",()=>({"@submit"(e){e.preventDefault(),document.querySelectorAll(".js-unit-checkbox").forEach(t=>{if(t.checked){let n=document.createElement("input");n.type="hidden",n.name=t.name,n.value=t.value,e.target.appendChild(n)}}),e.target.submit()}})),Alpine.store("form",{dirty:!1,makeDirty(){this.dirty=!0}}),document.querySelectorAll("#main-form input, #main-form select, #main-form textarea").forEach(e=>{e.addEventListener("change",()=>{Alpine.store("form").makeDirty()})}),Alpine.data("notifications",()=>({initialized:!1,open:!1,notifications:[],toggle(){this.open=!this.open,this.initialized||this.list()},async list(){let e=document.querySelector("#token").getAttribute("token"),t=await fetch(`/list/notifications/?ajax=1&token=${e}`);if(this.initialized=!0,!t.ok)throw new Error("An error occurred while listing notifications.");this.notifications=Object.values(await t.json())},async remove(e){let t=document.querySelector("#token").getAttribute("token");await fetch(`/delete/notification/?delete=1&notification_id=${e}&token=${t}`),this.notifications=this.notifications.filter(n=>n.ID!=e),this.notifications.length===0&&(this.open=!1)},async removeAll(){let e=document.querySelector("#token").getAttribute("token");await fetch(`/delete/notification/?delete=1&token=${e}`),this.notifications=[],this.open=!1}}))}function q(){if(document.querySelectorAll("dialog[open]").length===0){let t=document.querySelector("#main-form .form-control:not([disabled]), #main-form .form-select:not([disabled])");t&&t.focus()}}var _e=e=>crypto.getRandomValues(new Uint8Array(e)),De=(e,t,n)=>{let r=(2<<Math.log2(e.length-1))-1,o=-~(1.6*r*t/e.length);return(s=t)=>{let i="";for(;;){let c=n(o),a=o|0;for(;a--;)if(i+=e[c[a]&r]||"",i.length>=s)return i}}},ne=(e,t=21)=>De(e,t|0,_e);function b(e=16){let s="ABCDEFGHIJKLMNOPQRSTUVWXYZ"+"abcdefghijklmnopqrstuvwxyz"+"0123456789"+"!@#$%^&*()_+-=[]{}|;:/?",i=ne(s,e),c;do c=i();while(!(/[a-z]/.test(c)&&/[A-Z]/.test(c)&&/\d/.test(c)));return c}function l(e,t=100){let n;return function(...r){clearTimeout(n),n=setTimeout(()=>e.apply(this,r),t)}}function S(e){return getComputedStyle(document.documentElement).getPropertyValue(e).trim()}function E(){document.querySelector(".js-spinner").classList.add("active")}function y(e){return JSON.parse(e||"[]").sort((n,r)=>n.name.localeCompare(r.name))}function oe(){let e=window.navigator.userAgent,t=/^((?!chrome|android).)*safari/i.test(e),n=/Macintosh|MacIntel/i.test(window.navigator.platform);return t&&n}function re(e){return new Promise(t=>setTimeout(t,e))}async function se(e,t,n={}){let r={method:"POST",headers:{"Content-Type":"application/json",...n},body:JSON.stringify(t)},o=await fetch(e,r);if(!o.ok)throw new Error(`HTTP error ${o.status}: ${o.statusText}`);return o.json()}function u({title:e,message:t="Are you sure?",targetUrl:n,spinner:r=!1}){let o=document.createElement("dialog");if(o.classList.add("modal"),e){let h=document.createElement("h2");h.innerHTML=e,h.classList.add("modal-title"),o.append(h)}let s=document.createElement("p");s.innerHTML=t,s.classList.add("modal-message"),o.append(s);let i=document.createElement("div");i.classList.add("modal-options");let c=document.createElement("button");c.type="submit",c.classList.add("button"),c.textContent="OK",i.append(c);let a=document.createElement("button");a.type="button",a.classList.add("button","button-secondary","u-ml5"),a.textContent="Cancel",n&&i.append(a),o.append(i);let v=()=>{n&&(r&&E(),window.location.href=n),f()},p=()=>f(),f=()=>{c.removeEventListener("click",v),a.removeEventListener("click",p),o.removeEventListener("close",f),o.remove()};c.addEventListener("click",v),a.addEventListener("click",p),o.addEventListener("close",f),document.body.append(o),o.showModal()}function x(){let e=document.querySelector(".js-ip-list-select");if(!e)return;let t=y(e.dataset.ipsetLists),n=document.createElement("option");n.textContent="IPset IP Lists",n.disabled=!0,e.appendChild(n),t.forEach(r=>{let o=document.createElement("option");o.textContent=r.name,o.value=`ipset:${r.name}`,e.appendChild(o)})}function I(){document.querySelectorAll('input[type="text"]').forEach(e=>{e.addEventListener("change",function(){this.value=this.value.trim()})})}function j(){document.querySelectorAll(".js-confirm-action").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();let n=e.dataset.confirmTitle,r=e.dataset.confirmMessage,o=e.getAttribute("href");u({title:n,message:r,targetUrl:o,spinner:!0})})})}function w(){ie(".js-account-input",".js-account-output"),ie(".js-password-input",".js-password-output")}function ie(e,t){let n=document.querySelector(e),r=document.querySelector(t);if(!n||!r)return;function o(s){let i=r.dataset.postfix;s&&i&&(s+=i),r.value=s}n.addEventListener("input",l(s=>o(s.target.value))),o(n.value)}function k(){let e=document.querySelectorAll(".js-copy-input"),t=document.querySelectorAll(".js-copy-button");e.forEach((n,r)=>{let o=!1;if(!t[r])return;let s=t[r];n.addEventListener("click",()=>{o||(n.select(),o=!0,n.addEventListener("blur",()=>{o=!1},{once:!0}))}),s.addEventListener("click",()=>{navigator.clipboard.writeText(n.value).then(()=>{let i=s.innerHTML;s.innerHTML="Copied!",s.disabled=!0,setTimeout(()=>{s.innerHTML=i,s.disabled=!1},2e3)})})})}function C(){document.querySelectorAll(".js-generate-cron").forEach(e=>{e.addEventListener("click",()=>{let t=e.closest("fieldset");["min","hour","day","month","wday"].forEach(r=>{let o=t.querySelector(`[name=h_${r}]`).value,s=document.querySelector(`#main-form input[name=v_${r}]`);s.value=o,s.classList.add("highlighted"),s.addEventListener("transitionend",()=>{s.classList.remove("highlighted")},{once:!0})})})})}function _(){let e=document.querySelector(".js-db-hint-username"),t=document.querySelector(".js-db-hint-database-name");!e||!t||(Te(t),ce(e),ce(t))}function Te(e){e.value.indexOf(Alpine.store("globals").USER_PREFIX)===0&&(e.value=e.value.slice(Alpine.store("globals").USER_PREFIX.length))}function ce(e){e.value.trim()!==""&&ae(e),e.addEventListener("input",l(t=>ae(t.target)))}function ae(e){let t=e.parentElement.querySelector(".hint");e.value.trim()===""&&(t.textContent=""),t.textContent=Alpine.store("globals").USER_PREFIX+e.value}function D(){let e=document.querySelector(".js-discard-all-mail");e&&e.addEventListener("click",()=>{let t=document.querySelector(".js-forward-to-textarea"),n=document.querySelector(".js-do-not-store-checkbox");e.checked?(t.disabled=!0,n.checked=!0,n.parentElement.classList.add("u-hidden")):(t.disabled=!1,n.parentElement.classList.remove("u-hidden"))})}function T(){let e=document.querySelector(".js-dns-record-input");e&&(e.value.trim()!=""&&le(e),e.addEventListener("input",l(t=>le(t.target))))}function le(e){let t=document.querySelector(".js-dns-record-domain"),n=e.parentElement.querySelector(".hint"),r=e.value.trim();if(r===""){n.textContent="";return}r==="@"&&(r=""),r===t.value&&(r=""),r!==""&&r.slice(-1)!=="."&&(r+="."),n.textContent=r+t.value}function M(){let e=document.querySelector(".js-custom-docroot-domain"),t=document.querySelector(".js-custom-docroot-dir"),n=document.querySelector(".js-custom-docroot-prepath"),r=document.querySelector(".js-custom-docroot-hint");if(!e||!t||!n||!r)return;o(),t.addEventListener("input",l(o)),e.addEventListener("change",o);function o(){let s=n.value,i=e.value,c=t.value;r.textContent=`${s}${i}/public_html/${c}`}}function F(){let e=document.querySelector(".js-stats-select"),t=document.querySelectorAll(".js-stats-auth");e&&t.length&&e.addEventListener("change",()=>{e.value==="none"?t.forEach(i=>{i.style.display="none"}):t.forEach(i=>{i.style.display="block"})}),document.querySelectorAll(".js-redirect-custom-value").forEach(i=>{i.addEventListener("change",()=>{let c=document.querySelector(".js-custom-redirect-fields");c&&(i.value==="custom"?c.classList.remove("u-hidden"):c.classList.add("u-hidden"))})});let n=document.querySelector(".js-toggle-lets-encrypt"),r=document.querySelector(".js-ssl-details");n&&r&&n.addEventListener("change",()=>{n.checked?r.style.display="none":r.style.display="block"});let o=document.querySelector(".js-proxy-template-select"),s=document.querySelector(".js-clear-cache-button");o&&s&&o.addEventListener("change",()=>{o.value==="caching"||o.value.match(/^caching-/)?s.classList.remove("u-hidden"):s.classList.add("u-hidden")})}function O(){let e=Alpine.store("globals").ERROR_MESSAGE;e&&u({message:e})}function P(){document.querySelectorAll(".js-unlimited-toggle").forEach(e=>{let t=e.parentElement.querySelector("input");N(t.value)?de(t,e):me(t,e),e.addEventListener("click",()=>{Me(t,e)})})}function ue(){document.querySelectorAll("input:disabled").forEach(e=>{N(e.value)&&(e.disabled=!1,e.value="unlimited")})}function N(e){let t=e.trim();return t==="unlimited"||t===Alpine.store("globals").UNLIMITED}function de(e,t){t.classList.add("active"),e.dataset.prevValue=e.value,e.value=Alpine.store("globals").UNLIMITED,e.disabled=!0}function me(e,t){t.classList.remove("active");let n=e.dataset.prevValue?e.dataset.prevValue.trim():null;n&&(e.value=n),N(e.value)&&(e.value="0"),e.disabled=!1}function Me(e,t){t.classList.contains("active")?me(e,t):de(e,t)}function R(){document.querySelectorAll(".js-toggle-options").forEach(e=>{e.addEventListener("click",Fe)})}function Fe(){let e=document.querySelector(".js-advanced-options"),t=document.querySelector(".js-basic-options");e.classList.contains("u-hidden")?(e.classList.remove("u-hidden"),t.classList.add("u-hidden"),U()):(e.classList.add("u-hidden"),t.classList.remove("u-hidden"))}function U(){let e=document.querySelector(".js-advanced-textarea");document.querySelectorAll("#main-form input[type=text]").forEach(n=>{let r=n.dataset.regexp,o=n.dataset.prevValue;n.setAttribute("data-prev-value",n.value);let s=new RegExp(`(${r})(.+)(${o})`);e.value=e.value.replace(s,`$1$2${n.value}`)})}function $(){let e=document.querySelector("#main-form");e&&e.addEventListener("submit",async n=>{n.preventDefault(),E(),oe()&&await re(500),e.classList.contains("js-enable-inputs-on-submit")&&document.querySelectorAll("input[disabled]").forEach(o=>{o.disabled=!1}),ue();let r=document.querySelector(".js-basic-options");r&&!r.classList.contains("u-hidden")&&U(),e.submit()});let t=document.querySelector('[x-bind="BulkEdit"]');t&&t.addEventListener("submit",()=>{E()})}function g(){fe(".js-ftp-user",Oe),fe(".js-ftp-path",Pe)}function fe(e,t){document.querySelectorAll(e).forEach(n=>{let r=n.value.trim();r!==""&&t(n,r),n.addEventListener("input",l(o=>t(o.target,o.target.value)))})}function Oe(e,t){let r=e.parentElement.querySelector(".js-ftp-user-hint"),o=t.replace(/[^\w\d]/gi,"");o!==t&&(e.value=o),r.textContent=Alpine.store("globals").USER_PREFIX+o}function Pe(e,t){let r=e.parentElement.querySelector(".js-ftp-path-hint"),o=Ne(t);r.textContent=o}function Ne(e){return e[0]!=="/"&&(e="/"+e),e.replace(/\/(\/+)/g,"/")}function H(){Re(),pe(),Ue(),he(),$e()}function Re(){document.querySelectorAll(".js-ftp-user-psw").forEach(e=>{e.addEventListener("input",l(t=>ge(t.target)))})}function pe(){document.querySelectorAll(".js-ftp-password-generate").forEach(e=>{e.addEventListener("click",()=>{let t=e.parentElement.parentElement.querySelector(".js-ftp-user-psw");t.value=b(),ge(t)})})}function Ue(){let e=document.querySelector(".js-add-ftp-account");e&&e.addEventListener("click",()=>{let t=document.querySelector(".js-ftp-account-template .js-ftp-account-nrm").cloneNode(!0),r=document.querySelectorAll(".js-active-ftp-accounts .js-ftp-account").length;t.querySelectorAll("input").forEach(o=>{let s=o.getAttribute("name"),i=o.getAttribute("id");o.setAttribute("name",s.replace("%INDEX%",r)),i&&o.setAttribute("id",i.replace("%INDEX%",r))}),t.querySelectorAll("input + label").forEach(o=>{let s=o.getAttribute("for");o.setAttribute("for",s.replace("%INDEX%",r))}),t.querySelector(".js-ftp-user-number").textContent=r,document.querySelector(".js-active-ftp-accounts").appendChild(t),ye(),g(),pe(),he()})}function he(){document.querySelectorAll(".js-delete-ftp-account").forEach(e=>{e.addEventListener("click",()=>{let t=e.closest(".js-ftp-account");if(t.querySelector(".js-ftp-user-deleted").value="1",t.querySelector(".js-ftp-user-is-new").value==1)return t.remove();t.classList.remove("js-ftp-account-nrm"),t.style.display="none",ye(),document.querySelectorAll(".js-active-ftp-accounts .js-ftp-account-nrm").length==0&&(document.querySelector(".js-add-ftp-account").style.display="none",document.querySelector('input[name="v_ftp"]').checked=!1)})})}function ye(){document.querySelectorAll(".js-active-ftp-accounts .js-ftp-user-number").forEach((t,n)=>{t.textContent=n+1})}function $e(){let e=document.querySelector(".js-toggle-ftp-accounts");e&&e.addEventListener("change",t=>{let n=t.target.checked,r=document.querySelector(".js-add-ftp-account"),o=document.querySelectorAll(".js-ftp-account-nrm");r.style.display=n?"block":"none",o.forEach(s=>{let i=s.querySelector(".js-ftp-user"),c=s.querySelector(".js-ftp-user-deleted");i.value.trim()!==""&&(c.value=n?"0":"1"),s.style.display=n?"block":"none"})})}function ge(e){let t=e.closest(".js-ftp-account");if(t.querySelector(".js-email-alert-on-psw"))return;let r=t.querySelector(".js-ftp-user-is-new").name.replace("is_new","v_ftp_email"),o=`
		<div class="u-pl30 u-mb10">
			<label for="${r}" class="form-label">
				Send FTP credentials to email
			</label>
			<input type="email" class="form-control js-email-alert-on-psw"
				value="" name="${r}" id="${r}">
		</div>`;t.insertAdjacentHTML("beforeend",o)}function V(){let e=document.querySelector(".js-datasource-select");if(!e)return;let t=y(e.dataset.countryIplists),n=y(e.dataset.blacklistIplists);ve(e,Alpine.store("globals").BLACKLIST,n),ve(e,Alpine.store("globals").IPVERSE,t)}function ve(e,t,n){be(e,t,"",!0),n.forEach(r=>{be(e,r.name,r.source,!1)})}function be(e,t,n,r){let o=document.createElement("option");o.text=t,o.value=n,r&&(o.disabled=!0),e.append(o)}function K(){let e={sort_par:"sort-name",sort_direction:-1,sort_as_int:!1},t=document.querySelector(".js-toggle-sorting-menu"),n=document.querySelector(".js-sorting-menu"),r=document.querySelector(".js-units-container");!t||!n||!r||(t.addEventListener("click",()=>{n.classList.toggle("u-hidden")}),document.addEventListener("click",o=>{!(n.contains(o.target)||t.contains(o.target))&&!n.classList.contains("u-hidden")&&n.classList.add("u-hidden")}),n.querySelectorAll("span").forEach(o=>{o.addEventListener("click",function(){if(n.classList.add("u-hidden"),o.classList.contains("active"))return;n.querySelectorAll("span").forEach(a=>{a.classList.remove("active")}),o.classList.add("active");let s=o.closest("li");e.sort_par=s.dataset.entity,e.sort_as_int=!!s.dataset.sortAsInt,e.sort_direction=o.classList.contains("up")?1:-1,t.querySelector("span").innerHTML=s.querySelector(".name").innerHTML;let i=t.querySelector(".fas");i.classList.remove("fa-arrow-up-a-z","fa-arrow-down-a-z"),i.classList.add(o.classList.contains("up")?"fa-arrow-up-a-z":"fa-arrow-down-a-z"),Array.from(document.querySelectorAll(".js-unit")).sort((a,v)=>{let p=a.getAttribute(`data-${e.sort_par}`),f=v.getAttribute(`data-${e.sort_par}`);if(e.sort_as_int){let h=Number.parseInt(p),Ce=Number.parseInt(f);return h>=Ce?e.sort_direction:e.sort_direction*-1}return p<=f?e.sort_direction:e.sort_direction*-1}).forEach(a=>r.appendChild(a))})}))}function B(){let e=Array.from(document.querySelectorAll(".js-unit-checkbox")),t=e.map(o=>o.closest(".js-unit")),n=document.querySelector(".js-toggle-all-checkbox");if(e.length===0||!n)return;let r=null;e.forEach((o,s)=>{o.addEventListener("click",i=>{let c=o.checked;W(t[s],c),i.shiftKey&&r!==null&&He(e,t,s,r,c),r=s})}),n.addEventListener("change",()=>{let o=n.checked;e.forEach(s=>s.checked=o),t.forEach(s=>W(s,o))})}function W(e,t){e.classList.toggle("selected",t)}function He(e,t,n,r,o){let s=Math.min(n,r),i=Math.max(n,r);for(let c=s;c<=i;c++)e[c].checked=o,W(t[c],o)}function G(){let e=document.querySelector(".js-add-ns");e&&e.addEventListener("click",()=>Ve(e)),document.querySelectorAll(".js-remove-ns").forEach(t=>{t.addEventListener("click",()=>Ke(t))})}function Ve(e){let t=document.querySelectorAll("input[name^=v_ns]"),n=t.length;if(n<8){let r=t[0].parentElement.cloneNode(!0),o=r.querySelector("input");o.removeAttribute("value"),o.name=`v_ns${n+1}`,e.before(r)}n===7&&e.classList.add("u-hidden")}function Ke(e){e.parentElement.remove(),document.querySelectorAll("input[name^=v_ns]").forEach((n,r)=>n.name=`v_ns${r+1}`),document.querySelector(".js-add-ns").classList.remove("u-hidden")}var A={exports:{}},J=[{id:0,value:"Too weak",minDiversity:0,minLength:0},{id:1,value:"Weak",minDiversity:2,minLength:6},{id:2,value:"Medium",minDiversity:4,minLength:8},{id:3,value:"Strong",minDiversity:4,minLength:10}],Se=(e,t=J,n="!\"#$%&'()*+,-./:;<=>?@[\\\\\\]^_`{|}~")=>{let r=e||"";t[0].minDiversity=0,t[0].minLength=0;let o=[{regex:"[a-z]",message:"lowercase"},{regex:"[A-Z]",message:"uppercase"},{regex:"[0-9]",message:"number"}];n&&o.push({regex:`[${n}]`,message:"symbol"});let s={};s.contains=o.filter(c=>new RegExp(`${c.regex}`).test(r)).map(c=>c.message),s.length=r.length;let i=t.filter(c=>s.contains.length>=c.minDiversity).filter(c=>s.length>=c.minLength).sort((c,a)=>a.id-c.id).map(c=>({id:c.id,value:c.value}));return Object.assign(s,i[0]),s};A.exports={passwordStrength:Se,defaultOptions:J};var Ee=A.exports.passwordStrength=Se,Ut=A.exports.defaultOptions=J,$t=A.exports;function z(){document.querySelectorAll(".js-password-input").forEach(e=>{e.addEventListener("input",l(t=>We(t.target)))}),document.querySelectorAll(".js-generate-password").forEach(e=>{e.addEventListener("click",()=>{let t=e.parentNode.nextElementSibling.querySelector(".js-password-input");t&&(t.value=b(),t.dispatchEvent(new Event("input")))})})}function We(e){let t=e.value,n=e.parentNode.querySelector(".js-password-meter");if(n){if(t==="")return n.value=0;n.value=Ee(t).id+1}}var m={active_menu:1,menu_selector:".main-menu-item",menu_active_selector:".active"};function Le(){we("left")}function qe(){we("right")}function xe(){ke("down")}function Ie(){ke("up")}function je(){let e=document.querySelector(m.menu_selector+".focus a");if(e)return location.href=e.getAttribute("href");let t=document.querySelector(".js-unit.focus .units-table-row-actions .shortcut-enter a");t&&(location.href=t.getAttribute("href"))}function d(e){let t=e.dataset.keyAction;if(t==="js")return e.querySelector(".data-controls").click();t==="href"&&(location.href=e.querySelector("a").getAttribute("href"))}function we(e){let t=m.menu_selector,n=m.menu_active_selector,r=Array.from(document.querySelectorAll(t)),o=document.querySelector(`${t}.focus`),s=document.querySelector(t+n),i=r.indexOf(o);i===-1&&(i=r.indexOf(s)),r.forEach(c=>c.classList.remove("focus")),e==="left"?i>0?r[i-1].classList.add("focus"):Ae("last"):e==="right"&&(i<r.length-1?r[i+1].classList.add("focus"):Ae("first"))}function ke(e){let t=Array.from(document.querySelectorAll(".js-unit")),n=document.querySelector(".js-unit.focus"),r=t.indexOf(n);if(r===-1&&(r=0),e==="up"&&r>0)r--;else if(e==="down"&&r<t.length-1)r++;else return;n&&n.classList.remove("focus"),t[r].classList.add("focus"),window.scrollTo({top:t[r].getBoundingClientRect().top-200+window.scrollY,behavior:"smooth"})}function Ae(e="first"){if(m.active_menu===0){m.active_menu=1,m.menu_selector=".main-menu-item",m.menu_active_selector=".active";let t=document.querySelectorAll(m.menu_selector),n=e==="first"?0:t.length-1;t[n].classList.add("focus")}}function X(){Alpine.store("shortcuts",{registeredShortcuts:[],register(e,t,n){n={...{type:"keydown",propagate:!1,disabledInInput:!1,target:document},...n};let o=s=>{if(n.disabledInInput){let a=s.target.nodeType===3?s.target.parentNode:s.target;if(["input","textarea","selectbox"].includes(a.tagName.toLowerCase()))return}let i=[e.code?e.code==s.code:e.key.toLowerCase()==s.key.toLowerCase(),e.altKey&&s.altKey||!e.altKey&&!s.altKey,e.ctrlKey&&s.ctrlKey||!e.ctrlKey&&!s.ctrlKey,e.metaKey&&s.metaKey||!e.metaKey&&!s.metaKey,e.shiftKey&&s.shiftKey||!e.shiftKey&&!s.shiftKey];i.filter(Boolean).length===i.length&&(t(s),n.propagate||(s.stopPropagation(),s.preventDefault()))};return this.registeredShortcuts.push({combination:e,callback:o,target:n.target,event:n.type}),n.target.addEventListener(n.type,o),this},unregister(e){let t=this.registeredShortcuts.find(n=>JSON.stringify(n.combination)==JSON.stringify(e));if(t)return this.registeredShortcuts=this.registeredShortcuts.filter(n=>JSON.stringify(n.combination)!=JSON.stringify(e)),t.target.removeEventListener(t.event,t.callback,!1),this}}),Alpine.store("shortcuts").register({key:"A"},e=>{let t=document.querySelector("a.js-button-create");t&&(location.href=t.href)},{disabledInInput:!0}).register({key:"A",ctrlKey:!0,shiftKey:!0},e=>{let t=document.querySelector(".js-unit-checkbox:eq(0)").checked;document.querySelectorAll(".js-unit").forEach(n=>n.classList.toggle("selected"),!t),document.querySelectorAll(".js-unit-checkbox").forEach(n=>n.checked=!t)},{disabledInInput:!0}).register({code:"Backspace",ctrlKey:!0},e=>{let t=document.querySelector("a.js-button-back").href;t&&(Alpine.store("form").dirty&&t?u({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:t}):t&&(location.href=t))}).register({key:"F"},e=>{let t=document.querySelector(".js-search-input");t&&t.focus()},{disabledInInput:!0}).register({code:"Digit1"},e=>{let t=document.querySelector(".main-menu .main-menu-item:nth-of-type(1) a");t&&(Alpine.store("form").dirty?u({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:t.href}):location.href=t.href)},{disabledInInput:!0}).register({code:"Digit2"},e=>{let t=document.querySelector(".main-menu .main-menu-item:nth-of-type(2) a");t&&(Alpine.store("form").dirty?u({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:t.href}):location.href=t.href)},{disabledInInput:!0}).register({code:"Digit3"},e=>{let t=document.querySelector(".main-menu .main-menu-item:nth-of-type(3) a");t&&(Alpine.store("form").dirty?u({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:t.href}):location.href=t.href)},{disabledInInput:!0}).register({code:"Digit4"},e=>{let t=document.querySelector(".main-menu .main-menu-item:nth-of-type(4) a");t&&(Alpine.store("form").dirty?u({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:t.href}):location.href=t.href)},{disabledInInput:!0}).register({code:"Digit5"},e=>{let t=document.querySelector(".main-menu .main-menu-item:nth-of-type(5) a");t&&(Alpine.store("form").dirty?u({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:t.href}):location.href=t.href)},{disabledInInput:!0}).register({code:"Digit6"},e=>{let t=document.querySelector(".main-menu .main-menu-item:nth-of-type(6) a");t&&(Alpine.store("form").dirty?u({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:t.href}):location.href=t.href)},{disabledInInput:!0}).register({code:"Digit7"},e=>{let t=document.querySelector(".main-menu .main-menu-item:nth-of-type(7) a");t&&(Alpine.store("form").dirty?u({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:t.href}):location.href=t.href)},{disabledInInput:!0}).register({key:"H"},e=>{let t=document.querySelector(".shortcuts");t.open?t.close():t.showModal()},{disabledInInput:!0}).register({code:"Escape"},e=>{let t=document.querySelector("dialog[open]");t&&t.close(),document.querySelectorAll("input, checkbox, textarea, select").forEach(n=>n.blur())}).register({code:"ArrowLeft"},e=>{Le()},{disabledInInput:!0}).register({code:"ArrowRight"},e=>{qe()},{disabledInInput:!0}).register({code:"ArrowDown"},e=>{xe()},{disabledInInput:!0}).register({code:"ArrowUp"},e=>{Ie()},{disabledInInput:!0}).register({key:"L"},e=>{let t=document.querySelector(".js-units-container .js-unit.focus .shortcut-l");t&&d(t)},{disabledInInput:!0}).register({key:"S"},e=>{let t=document.querySelector(".js-units-container .js-unit.focus .shortcut-s");t&&d(t)},{disabledInInput:!0}).register({key:"W"},e=>{let t=document.querySelector(".js-units-container .js-unit.focus .shortcut-w");t&&d(t)},{disabledInInput:!0}).register({key:"D"},e=>{let t=document.querySelector(".js-units-container .js-unit.focus .shortcut-d");t&&d(t)},{disabledInInput:!0}).register({key:"R"},e=>{let t=document.querySelector(".js-units-container .js-unit.focus .shortcut-r");t&&d(t)},{disabledInInput:!0}).register({key:"N"},e=>{let t=document.querySelector(".js-units-container .js-unit.focus .shortcut-n");t&&d(t)},{disabledInInput:!0}).register({key:"U"},e=>{let t=document.querySelector(".js-units-container .js-unit.focus .shortcut-u");t&&d(t)},{disabledInInput:!0}).register({code:"Delete"},e=>{let t=document.querySelector(".js-units-container .js-unit.focus .shortcut-delete");t&&d(t)},{disabledInInput:!0}).register({code:"Enter"},()=>{if(Alpine.store("form").dirty)document.querySelector("dialog[open]")?document.querySelector("dialog[open]").querySelector('button[type="submit"]').click():u({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:document.querySelector(".main-menu-item.focus a").href});else if(document.querySelector("dialog[open]"))document.querySelector("dialog[open]").querySelector('button[type="submit"]').click();else{let e=document.querySelector(".js-units-container .js-unit.focus .shortcut-enter");e?d(e):je()}},{propagate:!0})}function Y(){let e=document.querySelector(".toolbar"),t=document.querySelector(".top-bar");if(!e||!t)return;window.addEventListener("scroll",n);function n(){let r=e.getBoundingClientRect().top,o=window.scrollY,s=document.documentElement.clientTop,i=r+o-s,c=t.offsetHeight,a=o>i-c;e.classList.toggle("active",a)}}function Z(){let e=document.querySelector(".js-sync-email-input"),t=document.querySelector(".js-sync-email-checkbox"),n=document.querySelector(".js-sync-email-output");if(!e||!t||!n)return;function r(){n.value=t.checked?e.value:""}e.addEventListener("input",l(()=>r())),t.addEventListener("change",r)}function Q(){let e=document.querySelector(".js-tabs");if(!e)return;let t=e.querySelectorAll(".tabs-item"),n=e.querySelectorAll(".tabs-panel");t.forEach(r=>{r.addEventListener("click",o=>{n.forEach(c=>c.hidden=!0),t.forEach(c=>{c.setAttribute("aria-selected",!1),c.setAttribute("tabindex",-1)});let s=o.target.getAttribute("id"),i=document.querySelector(`[aria-labelledby="${s}"]`);i.hidden=!1,o.target.setAttribute("aria-selected",!0),o.target.setAttribute("tabindex",0),o.target.focus()})})}async function ee(){let e=document.querySelectorAll(".js-rrd-chart");if(!e.length)return;let t=await Be();for(let n of e){let r=n.dataset.service,o=n.dataset.period,s=await se("/list/rrd/ajax.php",{service:r,period:o}),i=Ge(s,o),c=ze(s.unit);new t(n,{type:"line",data:i,options:c})}}async function Be(){return(await import("/js/dist/chart.js-auto.min.js")).Chart}function Ge(e,t){return{labels:e.data.map((n,r)=>{let o=e.meta.start+r*e.meta.step,s=new Date(o*1e3);return Je(s,t)}),datasets:e.meta.legend.map((n,r)=>{let o=S(`--chart-line-${r+1}-color`);return{label:n,data:e.data.map(s=>s[r]),tension:.3,pointStyle:!1,borderWidth:2,borderColor:o}})}}function Je(e,t){let n={daily:{hour:"2-digit",minute:"2-digit",hour12:!1},weekly:{weekday:"short",day:"numeric"},monthly:{month:"short",day:"numeric"},yearly:{month:"long"},biennially:{month:"long",year:"numeric"},triennially:{month:"long",year:"numeric"}};return e.toLocaleString([],n[t])}function ze(e){let t=S("--chart-label-color"),n=S("--chart-grid-color");return{plugins:{legend:{position:"bottom",labels:{color:t}}},scales:{x:{ticks:{color:t},grid:{color:n}},y:{title:{display:!!e,text:e,color:t},ticks:{color:t},grid:{color:n}}}}}async function te(){let e=document.querySelector(".js-web-terminal");if(!e)return;let t=await Xe(),n=new t,r=null;typeof WebGL2RenderingContext<"u"?r=await Ye():r=await Ze(),n.loadAddon(new r),n.open(e);let o=new WebSocket(`wss://${window.location.host}/_shell/`);o.addEventListener("open",s=>{n.onData(i=>o.send(i)),o.addEventListener("message",i=>n.write(i.data))}),o.addEventListener("error",s=>{n.reset(),n.writeln("Connection error.")}),o.addEventListener("close",s=>{s.wasClean&&(n.reset(),n.writeln(s.reason??"Connection closed."))})}async function Xe(){return(await import("/js/dist/xterm.min.js")).default.Terminal}async function Ye(){return(await import("/js/dist/xterm-addon-webgl.min.js")).default.WebglAddon}async function Ze(){return(await import("/js/dist/xterm-addon-canvas.min.js")).default.CanvasAddon}Qe();q();function Qe(){x(),I(),j(),w(),k(),C(),D(),T(),M(),F(),$(),H(),K(),B(),G(),z(),Y(),Z(),Q(),R(),ee(),te()}document.addEventListener("alpine:init",()=>{L(),_(),O(),g(),V(),X(),P()});})();
//# sourceMappingURL=main.min.js.map
